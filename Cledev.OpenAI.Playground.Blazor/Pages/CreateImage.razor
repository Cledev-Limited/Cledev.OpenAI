@page "/create-image"

@inherits CreateImagePage

<PageTitle>Cledev.OpenAI - Create Image</PageTitle>

<h1 class="pb-3 mb-4 border-bottom">Images</h1>

<ul class="nav nav-tabs mb-4">
    <li class="nav-item">
        <a class="nav-link active" aria-current="page" href="#">Create Image</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="/create-image-edit">Create Image Edit</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="/create-image-variation">Create Image Variation</a>
    </li>
</ul>

<p class="mb-4">Creates an image given a prompt.</p>

<EditForm Model="Request" OnValidSubmit="OnSubmitAsync">
    <div class="mb-3">
        <InputText id="Prompt" placeholder="Prompt (Required)" @bind-Value="Request.Prompt" class="form-control" />
    </div>

    <ImageOptions Request="Request" Sizes="Sizes" Formats="Formats"></ImageOptions>

    @if (IsLoading)
    {
        <button class="btn btn-primary text-nowrap" type="button" disabled>
            <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
            Creating Image...
        </button>
        <button type="button" class="btn btn-outline-secondary" disabled>Options</button>
    }
    else
    {
        <button type="submit" class="btn btn-primary">Create Image</button>
        <button type="button" class="btn btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#optionsModal">Options</button>
    }
</EditForm>

@if (Response is not null && Error is null)
{
    <h4 class="mt-3">Response</h4>

    @foreach (var image in Images)
    {
        <img src="@image" alt="@Request.Prompt" class="mb-3 border" />
        <literal>&nbsp;</literal>
    }
}
        
<Error Model="Error"></Error>
